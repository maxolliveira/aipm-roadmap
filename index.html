<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI PM Roadmap</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { 
            margin: 0; 
            font-family: system-ui, -apple-system, sans-serif; 
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // ‚öôÔ∏è CONFIGURA√á√ÉO SUPABASE
        // DEPOIS DE CRIAR SEU PROJETO NO SUPABASE, SUBSTITUA AQUI:
        const SUPABASE_URL = 'https://izsassdgnrzzopdjvyip.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6c2Fzc2RnbnJ6em9wZGp2eWlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3ODk5NTIsImV4cCI6MjA3NTM2NTk1Mn0.EGBb3UX0KDyh3aE8jXrivIbn6Q7Vo_P7xjVDszNysHk';

        // Componente principal
        const { useState, useEffect } = React;
        const { Trophy, BookOpen, Code, Users, Briefcase, Star, CheckCircle2, Circle, Award, ChevronDown, ChevronUp, Zap } = lucide;

        function AIPMRoadmap() {
          const [activeTab, setActiveTab] = useState('roadmap');
          const [expandedPhase, setExpandedPhase] = useState(0);
          const [showAchievements, setShowAchievements] = useState(false);
          const [useCloud, setUseCloud] = useState(false);
          
          const [userProgress, setUserProgress] = useState({
            totalXP: 0,
            level: 'Junior PM',
            completedItems: [],
            achievements: []
          });

          const levels = [
            { name: 'Junior PM', xpRequired: 0, icon: 'üå±' },
            { name: 'Mid PM', xpRequired: 1000, icon: 'üöÄ' },
            { name: 'Senior PM', xpRequired: 3000, icon: '‚ö°' },
            { name: 'Staff PM', xpRequired: 6000, icon: 'üëë' },
            { name: 'AI PM Expert', xpRequired: 10000, icon: 'üèÜ' }
          ];

          const achievements = [
            { id: 'first', name: 'Primeira Conquista', description: 'Complete sua primeira tarefa', icon: 'üéØ' },
            { id: 'streak_7', name: 'Consist√™ncia', description: 'Complete 7 tarefas', icon: 'üî•' },
            { id: 'phase_1', name: 'Funda√ß√£o Completa', description: 'Complete a Fase 1', icon: 'üìö' },
            { id: 'coder', name: 'Programador', description: 'Complete 3 projetos', icon: 'üíª' },
            { id: 'senior', name: 'Senior PM', description: 'Alcance 3000 XP', icon: '‚≠ê' }
          ];

          const roadmapData = [
            {
              phase: 'Fase 1: Funda√ß√£o',
              duration: 'Meses 1-3',
              color: 'bg-blue-500',
              items: [
                { id: 1, title: 'AI Product Management Specialization (Duke)', xp: 200, type: 'course' },
                { id: 2, title: 'Generative AI for PMs (IBM)', xp: 150, type: 'course' },
                { id: 3, title: 'Building AI-Powered Products', xp: 150, type: 'book' },
                { id: 4, title: 'Inspired (Marty Cagan)', xp: 100, type: 'book' },
                { id: 5, title: 'Participar de 3 comunidades', xp: 50, type: 'community' },
                { id: 6, title: 'Seguir 10+ experts LinkedIn', xp: 30, type: 'community' }
              ]
            },
            {
              phase: 'Fase 2: Profundidade T√©cnica',
              duration: 'Meses 4-6',
              color: 'bg-purple-500',
              items: [
                { id: 7, title: 'Curso de LLMs', xp: 250, type: 'course' },
                { id: 8, title: 'Dominar Prompt Engineering', xp: 150, type: 'skill' },
                { id: 9, title: 'Construir AI Copilot', xp: 400, type: 'project' },
                { id: 10, title: 'Implementar RAG Application', xp: 400, type: 'project' },
                { id: 11, title: 'Criar AI Agent', xp: 500, type: 'project' }
              ]
            },
            {
              phase: 'Fase 3: Especializa√ß√£o',
              duration: 'Meses 7-9',
              color: 'bg-green-500',
              items: [
                { id: 12, title: 'Criar 5 case studies', xp: 300, type: 'case' },
                { id: 13, title: 'Framework de ROI para AI', xp: 250, type: 'framework' },
                { id: 14, title: 'Curso Responsible AI', xp: 200, type: 'course' },
                { id: 15, title: 'Estudar GDPR e AI Act', xp: 150, type: 'study' }
              ]
            },
            {
              phase: 'Fase 4: Leadership',
              duration: 'Meses 10-12',
              color: 'bg-yellow-500',
              items: [
                { id: 16, title: 'Palestrar em 2 meetups', xp: 500, type: 'speaking' },
                { id: 17, title: 'Publicar 10+ artigos', xp: 400, type: 'content' },
                { id: 18, title: 'Mentorar 3+ PMs', xp: 400, type: 'mentoring' },
                { id: 19, title: 'Publicar framework pr√≥prio', xp: 600, type: 'framework' }
              ]
            }
          ];

          const [itemStates, setItemStates] = useState(
            roadmapData.flatMap(phase => phase.items.map(item => ({ id: item.id, completed: false })))
          );

          // Sincronizar com Supabase
          const syncToCloud = async () => {
            if (!useCloud || SUPABASE_URL === 'https://SUA-URL.supabase.co') return;
            
            try {
              const response = await fetch(`${SUPABASE_URL}/rest/v1/user_progress?user_id=eq.default_user`, {
                method: 'PATCH',
                headers: {
                  'apikey': SUPABASE_KEY,
                  'Authorization': `Bearer ${SUPABASE_KEY}`,
                  'Content-Type': 'application/json',
                  'Prefer': 'return=minimal'
                },
                body: JSON.stringify({
                  total_xp: userProgress.totalXP,
                  level: userProgress.level,
                  completed_items: userProgress.completedItems,
                  achievements: userProgress.achievements,
                  updated_at: new Date().toISOString()
                })
              });
              console.log('‚úÖ Sincronizado!');
            } catch (error) {
              console.error('‚ùå Erro ao sincronizar:', error);
            }
          };

          useEffect(() => {
            if (useCloud) syncToCloud();
          }, [userProgress, useCloud]);

          const toggleItem = (itemId) => {
            const newStates = itemStates.map(state => 
              state.id === itemId ? { ...state, completed: !state.completed } : state
            );
            setItemStates(newStates);

            const item = roadmapData.flatMap(p => p.items).find(i => i.id === itemId);
            const isCompleted = newStates.find(s => s.id === itemId).completed;

            setUserProgress(prev => {
              const newXP = isCompleted ? prev.totalXP + item.xp : prev.totalXP - item.xp;
              const newCompleted = isCompleted 
                ? [...prev.completedItems, itemId]
                : prev.completedItems.filter(id => id !== itemId);
              
              const currentLevel = [...levels].reverse().find(level => newXP >= level.xpRequired);
              
              let newAchievements = [...prev.achievements];
              if (newCompleted.length >= 1 && !newAchievements.includes('first')) newAchievements.push('first');
              if (newCompleted.length >= 7 && !newAchievements.includes('streak_7')) newAchievements.push('streak_7');
              if (newXP >= 3000 && !newAchievements.includes('senior')) newAchievements.push('senior');

              return {
                totalXP: newXP,
                level: currentLevel.name,
                completedItems: newCompleted,
                achievements: newAchievements
              };
            });
          };

          const currentLevelIndex = levels.findIndex(l => l.name === userProgress.level);
          const totalItems = roadmapData.reduce((sum, phase) => sum + phase.items.length, 0);
          const completedCount = userProgress.completedItems.length;
          const overallProgress = (completedCount / totalItems) * 100;

          const isCloudConfigured = SUPABASE_URL !== 'https://SUA-URL.supabase.co';

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white">
              {/* Header */}
              <div className="bg-black/30 backdrop-blur-lg border-b border-white/10 sticky top-0 z-50">
                <div className="max-w-7xl mx-auto px-4 py-4">
                  {!isCloudConfigured && (
                    <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-3 mb-4">
                      <p className="text-sm text-yellow-300">
                        ‚ö†Ô∏è Configure suas credenciais Supabase no c√≥digo para usar sincroniza√ß√£o
                      </p>
                    </div>
                  )}
                  
                  <div className="flex items-center justify-between flex-wrap gap-4">
                    <div className="flex items-center space-x-3">
                      <div className="text-4xl">üèÜ</div>
                      <div>
                        <h1 className="text-xl md:text-2xl font-bold">AI PM Journey</h1>
                        <p className="text-xs text-gray-400">Roadmap GenAI</p>
                      </div>
                    </div>
                    
                    <div className="flex items-center space-x-4">
                      {isCloudConfigured && (
                        <button
                          onClick={() => setUseCloud(!useCloud)}
                          className={`px-3 py-1 rounded-lg text-sm ${useCloud ? 'bg-green-500/20 text-green-400' : 'bg-gray-700 text-gray-400'}`}
                        >
                          ‚òÅÔ∏è {useCloud ? 'ON' : 'OFF'}
                        </button>
                      )}
                      <div className="text-center">
                        <div className="text-xs text-gray-400">N√≠vel</div>
                        <div className="text-2xl">{levels[currentLevelIndex].icon}</div>
                      </div>
                      <div className="text-center">
                        <div className="text-xs text-gray-400">XP</div>
                        <div className="text-lg font-bold text-yellow-400">{userProgress.totalXP}</div>
                      </div>
                      <button
                        onClick={() => setShowAchievements(!showAchievements)}
                        className="relative p-2 hover:bg-white/10 rounded-lg"
                      >
                        <div className="text-2xl">üèÖ</div>
                        {userProgress.achievements.length > 0 && (
                          <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                            {userProgress.achievements.length}
                          </span>
                        )}
                      </button>
                    </div>
                  </div>
                  
                  <div className="mt-4">
                    <div className="flex justify-between text-xs text-gray-400 mb-1">
                      <span>{completedCount}/{totalItems} itens</span>
                      <span>{overallProgress.toFixed(0)}%</span>
                    </div>
                    <div className="w-full bg-gray-700 rounded-full h-2">
                      <div 
                        className="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500"
                        style={{ width: `${overallProgress}%` }}
                      />
                    </div>
                  </div>
                </div>
              </div>

              {/* Achievements Modal */}
              {showAchievements && (
                <div className="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4" onClick={() => setShowAchievements(false)}>
                  <div className="bg-gradient-to-br from-slate-800 to-purple-900 rounded-2xl max-w-2xl w-full p-6" onClick={e => e.stopPropagation()}>
                    <div className="flex items-center justify-between mb-6">
                      <h2 className="text-2xl font-bold">üèÜ Conquistas</h2>
                      <button onClick={() => setShowAchievements(false)} className="text-2xl">√ó</button>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {achievements.map(ach => {
                        const unlocked = userProgress.achievements.includes(ach.id);
                        return (
                          <div 
                            key={ach.id} 
                            className={`rounded-lg p-4 ${unlocked ? 'bg-green-500/20 border-2 border-green-500' : 'bg-gray-800/30 opacity-50'}`}
                          >
                            <div className="text-3xl mb-2">{ach.icon}</div>
                            <h4 className="font-bold">{ach.name}</h4>
                            <p className="text-sm text-gray-300">{ach.description}</p>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              )}

              {/* Roadmap */}
              <div className="max-w-7xl mx-auto px-4 py-6">
                <div className="space-y-6">
                  {roadmapData.map((phase, phaseIndex) => {
                    const phaseCompletion = phase.items.filter(item => 
                      itemStates.find(s => s.id === item.id)?.completed
                    ).length;
                    const phaseTotal = phase.items.length;
                    const phaseProgress = (phaseCompletion / phaseTotal) * 100;
                    
                    return (
                      <div key={phaseIndex} className="bg-white/5 backdrop-blur-lg rounded-xl border border-white/10">
                        <div 
                          className="p-6 cursor-pointer hover:bg-white/5"
                          onClick={() => setExpandedPhase(expandedPhase === phaseIndex ? -1 : phaseIndex)}
                        >
                          <div className="flex items-center justify-between">
                            <div>
                              <h3 className="text-xl font-bold">{phase.phase}</h3>
                              <p className="text-sm text-gray-400">{phase.duration}</p>
                            </div>
                            <div className="text-right">
                              <div className="text-sm">{phaseCompletion}/{phaseTotal}</div>
                              <div className="text-xs text-gray-500">{phaseProgress.toFixed(0)}%</div>
                            </div>
                          </div>
                          
                          <div className="mt-4 w-full bg-gray-700 rounded-full h-2">
                            <div 
                              className={`${phase.color} h-2 rounded-full transition-all`}
                              style={{ width: `${phaseProgress}%` }}
                            />
                          </div>
                        </div>
                        
                        {expandedPhase === phaseIndex && (
                          <div className="p-6 pt-0 space-y-3">
                            {phase.items.map(item => {
                              const state = itemStates.find(s => s.id === item.id);
                              return (
                                <div key={item.id} className="bg-white/5 rounded-lg p-4 hover:bg-white/10">
                                  <div className="flex items-center space-x-3">
                                    <button onClick={() => toggleItem(item.id)}>
                                      {state?.completed ? (
                                        <span className="text-2xl">‚úÖ</span>
                                      ) : (
                                        <span className="text-2xl">‚≠ï</span>
                                      )}
                                    </button>
                                    <div className="flex-1">
                                      <div className="flex items-center gap-2 flex-wrap">
                                        <span className={state?.completed ? 'line-through text-gray-500' : ''}>
                                          {item.title}
                                        </span>
                                        <span className="text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded">
                                          ‚ö° +{item.xp} XP
                                        </span>
                                        <span className="text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded">
                                          {item.type}
                                        </span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              );
                            })}
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>
              </div>
            </div>
          );
        }
    </script>
    
    <script type="text/babel">
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AIPMRoadmap />);
    </script>
</body>
</html>
